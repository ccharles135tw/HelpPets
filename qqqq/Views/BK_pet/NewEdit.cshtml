@model prjHomeLess.ViewModel.CPet

@{
    ViewData["Title"] = "NewEdit";
    Layout = "_BackLayout";
    qqqq.Models.我救浪Context db = new 我救浪Context();
}

<h1>浪浪修改</h1>


<hr />
<div class="row">
    <div class="col-md-4">
        <form asp-action="NewEdit">
            <div class="form-group" hidden>
                <label asp-for="ProductId" class="control-label"></label>
                <input asp-for="ProductId" class="form-control" />
                <span asp-validation-for="ProductId" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="ProductName" class="control-label"></label>
                <input asp-for="ProductName" class="form-control" />
                <span asp-validation-for="ProductName" class="text-danger"></span>
            </div>
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-group" hidden>
                <label asp-for="CategoryId" class="control-label"></label>
                <input asp-for="CategoryId" class="form-control" />
                <span asp-validation-for="CategoryId" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="CategoryName" class="control-label"></label>
                <select id="Category" asp-for="CategoryName" class="input">
                    <option value="none" selected disabled hidden>請選擇選項</option>
                    @{
                        var q = from c in db.Categories
                                where c.IsPet == true && c.CategoryName != "不限"
                                select c;
                        foreach (Category c in q)
                        {
                            if (Model.Product.SubCategory.CategoryId == c.CategoryId)
                            {
                                <option value="@c.CategoryId" selected>@c.CategoryName</option>
                            }
                            else
                            {
                                <option value="@c.CategoryId">@c.CategoryName</option>
                            }
                        }
                    }
                </select>
            </div>
            <div class="form-group" hidden>
                <label asp-for="SubCategoryId" class="control-label"></label>
                <input asp-for="SubCategoryId" class="form-control" />
                <span asp-validation-for="SubCategoryId" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="SubCategoryName" class="control-label"></label>
                <select id="SubCategory" name="SubCategoryId" class="form-select " aria-label=".form-select-sm example">
                    <option value="none" selected disabled hidden>請選擇選項</option>
                    @{
                        var qsc = from sc in db.SubCategories
                                  where sc.SubCategoryName != "不限"
                                  select sc;
                        foreach (SubCategory sc in qsc)
                        {
                            if (sc.CategoryId == Model.Product.SubCategory.CategoryId)
                            {
                                if (sc.SubCategoryId == Model.Product.SubCategoryId)
                                {
                                    <option value="@sc.SubCategoryId" selected Category="@sc.CategoryId">@sc.SubCategoryName</option>
                                }
                                else
                                {
                                    <option value="@sc.SubCategoryId" Category="@sc.CategoryId">@sc.SubCategoryName</option>
                                }

                            }
                            else
                            {
                                <option value="@sc.SubCategoryId" style="display:none" Category="@sc.CategoryId">@sc.SubCategoryName</option>
                            }
                        }
                    }
                </select>
                <span asp-validation-for="SubCategoryName" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Description" class="control-label"></label>
                <input asp-for="Description" class="form-control" />
                <span asp-validation-for="Description" class="text-danger"></span>
            </div>
            <div class="form-group" hidden>
                <label asp-for="GenderId" class="control-label"></label>
                <input asp-for="GenderId" class="form-control" />
                <span asp-validation-for="GenderId" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="GenderType" class="control-label"></label>
                <select asp-for="GenderType" class="input">
                    @{
                        var qg = from g in db.Genders
                                 where g.GenderType != "不限"
                                 select g;
                        foreach (Gender g in qg)
                        {
                            if (g.GenderId == Model.GenderId)
                            {
                                <option value="@g.GenderId" selected>@g.GenderType</option>
                            }
                            else
                            {
                                <option value="@g.GenderId">@g.GenderType</option>
                            }

                        }
                    }
                </select>
                <span asp-validation-for="GenderType" class="text-danger"></span>
            </div>
            <div class="form-group" hidden>
                <label asp-for="ColorId" class="control-label"></label>
                <input asp-for="ColorId" class="form-control" />
                <span asp-validation-for="ColorId" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="ColorName" class="control-label"></label>
                <select asp-for="ColorName" class="input">
                    @{
                        var qcol = from col in db.Colors
                                   where col.ColorName != "不限"
                                   select col;
                        foreach (Color col in qcol)
                        {
                            if (col.ColorId == Model.ColorId)
                            {
                                <option value="@col.ColorId" selected>@col.ColorName</option>
                            }
                            else
                            {
                                <option value="@col.ColorId">@col.ColorName</option>
                            }

                        }
                    }
                </select>
                <span asp-validation-for="ColorName" class="text-danger"></span>
            </div>
            <div class="form-group" hidden>
                <label asp-for="CityId" class="control-label"></label>
                <input asp-for="CityId" class="form-control" />
                <span asp-validation-for="CityId" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="CityName" class="control-label"></label>
                <select asp-for="CityName" class="input">
                    @{
                        var qcity = from ci in db.Cities
                                    where ci.CityName != "不限"
                                    select ci;
                        foreach (City ci in qcity)
                        {
                            if (ci.CityId == Model.CityId)
                            {
                                <option value="@ci.CityId" selected>@ci.CityName</option>
                            }
                            else
                            {
                                <option value="@ci.CityId">@ci.CityName</option>
                            }
                            <option value="@ci.CityId">@ci.CityName</option>
                        }
                    }
                </select>
                <span asp-validation-for="CityName" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="YearCost" class="control-label"></label>
                <input asp-for="YearCost" class="form-control" />
                <span asp-validation-for="YearCost" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Space" class="control-label"></label>
                <input asp-for="Space" class="form-control" />
                <span asp-validation-for="Space" class="text-danger"></span>
            </div>
            <div class="form-group" hidden>
                <label asp-for="SizeId" class="control-label"></label>
                <input asp-for="SizeId" class="form-control" />
                <span asp-validation-for="SizeId" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="SizeType" class="control-label"></label>
                <input asp-for="SizeType" class="form-control" />
                <span asp-validation-for="SizeType" class="text-danger"></span>
            </div>
            <div class="form-group" hidden>
                <label asp-for="AgeId" class="control-label"></label>
                <input asp-for="AgeId" class="form-control" />
                <span asp-validation-for="AgeId" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="AgeType" class="control-label"></label>
                <input asp-for="AgeType" class="form-control" />
                <span asp-validation-for="AgeType" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="AccompanyTimeWeek" class="control-label"></label>
                <input asp-for="AccompanyTimeWeek" class="form-control" />
                <span asp-validation-for="AccompanyTimeWeek" class="text-danger"></span>
            </div>
            <div class="form-group" hidden>
                <label asp-for="LigationId" class="control-label"></label>
                <input asp-for="LigationId" class="form-control" />
                <span asp-validation-for="LigationId" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="LigationType" class="control-label"></label>
                <input asp-for="LigationType" class="form-control" />
                <span asp-validation-for="LigationType" class="text-danger"></span>
            </div>
            <div class="form-group">
                <input type="submit" value="Save" class="btn btn-primary" />
            </div>
        </form>
    </div>
</div>

<div>
    <a asp-action="NewPetList">返回</a>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script>

        $("#Category").change(function () {
            $(`#SubCategory option`).hide();
            $("#SubCategory").val("none");
            let CategoryId = this.value;
            $(`#SubCategory option[Category=${CategoryId}]`).show();
        });
    </script>
}

